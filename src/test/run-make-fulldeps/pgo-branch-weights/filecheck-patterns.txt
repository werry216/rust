
# First, establish that certain !prof labels are attached to the expected
# functions and branching instructions.

CHECK: define void @function_called_twice(i32 %c) {{.*}} !prof !29 {
CHECK: br i1 {{.*}}, label {{.*}}, label {{.*}}, !prof !30

CHECK: define void @function_called_42_times(i32 %c) {{.*}} !prof !31 {
CHECK:      switch i32 %c, label {{.*}} [
CHECK-NEXT:     i32 97, label {{.*}}
CHECK-NEXT:     i32 98, label {{.*}}
CHECK-NEXT: ], !prof !32

CHECK: define void @function_called_never(i32 {{.*}} !prof !33 {



# Now check that those !prof tags hold the expected counts

CHECK: !29 = !{!"function_entry_count", i64 2}
CHECK: !30 = !{!"branch_weights", i32 2, i32 0}
CHECK: !31 = !{!"function_entry_count", i64 42}
CHECK: !32 = !{!"branch_weights", i32 2, i32 12, i32 28}
CHECK: !33 = !{!"function_entry_count", i64 0}
